import './styles.css'
import { Steps, Notes } from 'mdx-deck'
import { CodeSurfer, CodeSurferColumns, Step } from 'code-surfer'
import { vsDark, nightOwl } from '@code-surfer/themes'
import { BuilderSlideSection } from './components/BuilderSlideSection/BuilderSlideSection.js'
import { Button } from './components/Button/Button.js'
import { ClosedBottleneck } from './components/Bottleneck/ClosedBottleneck.js'
import { OpenBottleneck } from './components/Bottleneck/OpenBottleneck.js'
import { RandomlyPlaced } from './layouts/RandomlyPlaced.js'
import { ImageDeck, DECK_IMAGES } from './images/ImageDeck.js'
import { FadeIn } from './components/FadeIn.js'
import { IntroGrid } from './layouts/IntroGrid.js'
import { ZoomSteps } from './components/ZoomSteps/ZoomSteps.js'
import { KawaiiWrapper } from './components/KawaiiWrapper/KawaiiWrapper.js'
import './components/KawaiiWrapper/KawaiiWrapper.builder.js'
import { SideBySide } from './layouts/SideBySide.js'
import { ThankYouSlide } from './slides/ThankYouSlide.js'
import myTheme from './theme/theme'
import { MigrationResultsSlide } from './slides/MigrationResultsSlide.js'
import { SlideLayout } from './layouts/SlideLayout.js'
import { BuilderSlide } from './slides/BuilderSlide.js'

export const theme = myTheme

# Code or No-Code: Why not both? ü§∑‚Äç‚ôÄÔ∏è

## Building a hybrid infrastructure using Next.js & Builder.io to free up your time

---

# Hello üëã

<IntroGrid>
  <div style={{gridRow:'1/2', gridColumn:'1/3', width: '100%', height: '100%'}}>
  <ImageDeck deckImage={DECK_IMAGES.RON} /> 
  <div style={{textAlign: 'center', fontSize: '46px'}}>Ron Hagafny</div>`
  </div>

  <Steps>

<ImageDeck
  width={'50%'}
  height={'50%'}
  deckImage={DECK_IMAGES.MIXTILES}
  style={{ gridRow: '2/3', gridColumn: '1/2' }}
/>
<ImageDeck
  width={'50%'}
  height={'50%'}
  deckImage={DECK_IMAGES.EASYPLANT}
  style={{ gridRow: '1/2', gridColumn: '2/3' }}
/>

  </Steps>
</IntroGrid>

---

<ImageDeck
  width={'100%'}
  height={'100%'}
  deckImage={DECK_IMAGES.HOMEPAGE}
  styles={{ backgroundSize: 'cover' }}
/>

---

<ImageDeck
  width={'100%'}
  height={'100%'}
  deckImage={DECK_IMAGES.COLLECTIONS}
  styles={{ backgroundSize: 'cover' }}
/>

---

<ImageDeck
  width={'100%'}
  height={'100%'}
  deckImage={DECK_IMAGES.FAQ}
  styles={{ backgroundSize: 'cover' }}
/>

---

<em style={{fontSize: '1.5em'}}>With great traction, comes great responsibility</em>

---

<ImageDeck
  width={'90%'}
  height={'90%'}
  deckImage={DECK_IMAGES.DEV_DEPENDNECIES}
/>

<Notes>

- Marketing team wants to change content of the pages
- Design team wants to try different layouts, and as the developers we need to do some pixel pushing here and there
- Product would like to run A/B tests because maybe instead of 10% discount, we show, a 50$ discont , that can convert more people
- Finally Operations, they need their internal tools to help their prodactivity
- And here we sit , the developers, caught in the middle

</Notes>

---

<SlideLayout title='Code releases became the bottleneck of the business'>
  <ClosedBottleneck initialDelay={1000} interval={200} />
</SlideLayout>

---

<h1><ImageDeck deckImage={DECK_IMAGES.BUILDER} style={{ width: '256px', height: '256px' }}/></h1>

<ImageDeck deckImage={DECK_IMAGES.BUILDER_1} width={'50%'} height={'50%'} />

---

<ImageDeck
  width={'100%'}
  height={'100%'}
  deckImage={DECK_IMAGES.BUILDER_2}
  styles={{ backgroundSize: 'cover' }}
/>

---

<h1>
  <ImageDeck deckImage={DECK_IMAGES.NEXT_JS} style={{ width: '256px', height: '256px' }} />
</h1>
<div
  style={{
    width: '100vh',
    height: '100vh',
    display: 'flex',
    alignItems: 'center',
    justifyContent: 'space-between',
  }}
>
  <ZoomSteps>
    <ImageDeck deckImage={DECK_IMAGES.ROCKET} style={{ width: '256px', height: '256px' }}/>
    <ImageDeck deckImage={DECK_IMAGES.SEO} style={{ width: '256px', height: '256px' }}/> 
  </ZoomSteps>
</div>

---

<ImageDeck
  width={'100%'}
  height={'100%'}
  deckImage={DECK_IMAGES.FAQ}
  styles={{ backgroundSize: 'cover' }}
/>

---

<CodeSurfer theme={vsDark}>

```js showNumbers
const FaqPage = ({ data }) => {
  return (
    <>
      <h1>FAQ</h1>
      <FaqList data={data} />
    </>
  )
}
```

```js 10:19
const FaqPage = ({ data }) => {
  return (
    <>
      <h1>FAQ</h1>
      <FaqList data={data} />
    </>
  )
}

export async function getStaticProps() {
  // Get data from external API
  const data = await getFaqData()

  return {
    props: {
      data,
    },
  }
}
```

```js 1[16:26],12:17
const FaqPage = ({ data }) => {
  return (
    <>
      <h1>FAQ</h1>
      <FaqList data={data} />
    </>
  )
}

export async function getStaticProps() {
  // Get data from external API
  const data = await getFaqData()

  return {
    props: {
      data,
    },
  }
}
```

```js 10:22
const FaqPage = ({ data }) => {
  return (
    <>
      <h1>FAQ</h1>
      <FaqList data={data} />
    </>
  )
}

export async function getStaticProps() {
  const faqPageContent = await builder.get('page', {
    userAttributes: {
      urlPath: '/faq',
    },
  })

  return {
    props: {
      faqPageContent,
    },
  }
}
```

```js 1:8
const FaqPage = ({ data }) => {
  return (
    <>
      <h1>FAQ</h1>
      <FaqList data={data} />
    </>
  )
}

export async function getStaticProps() {
  const faqPageContent = await builder.get('page', {
    userAttributes: {
      urlPath: '/faq',
    },
  })

  return {
    props: {
      faqPageContent,
    },
  }
}
```

```js 1:5
const FaqPage = ({ faqPageContent }) => {
  return (
    <BuilderComponent model="page" content={faqPageContent}>
  )
}

export async function getStaticProps() {
  const pageContent = await builder.get('page', {
    userAttributes: {
      urlPath: '/faq'
    }
  })

  return {
    props: {
      pageContent
    }
  }
}
```

</CodeSurfer>

---

<ImageDeck
  width={'100%'}
  height={'100%'}
  deckImage={DECK_IMAGES.FAQ_END_1}
  styles={{ backgroundSize: 'cover' }}
/>

---

<ImageDeck
  width={'100%'}
  height={'100%'}
  deckImage={DECK_IMAGES.FAQ_END_2}
  styles={{ backgroundSize: 'cover' }}
/>

---

<ImageDeck
  width={'100%'}
  height={'100%'}
  deckImage={DECK_IMAGES.FAQ_END_3}
  styles={{ backgroundSize: 'cover' }}
/>

---

 <SlideLayout title='Building a Design System'>

<Steps>
  <div style={{width: '100%', height:'100%'}}>
    <Button text='Click Me' href='./' />
  </div>
</Steps>

</SlideLayout>


---

<CodeSurferColumns themes={[vsDark, myTheme]}>

<Step>

```js showNumbers
// Button.js
import React from 'react'
import MuiButton from '@mui/material/Button'

const Button = ({ text, link }) => {
  return (
    <MuiButton text={text} href={link}>
      {text}
    </MuiButton>
  )
}

export default Button
```

```js

```

</Step>

<Step>

```js showNumbers 5[16:31]
// Button.js
import React from 'react'
import MuiButton from '@mui/material/Button'

const Button = ({ text, link }) => {
  return (
    <MuiButton text={text} href={link}>
      {text}
    </MuiButton>
  )
}

export default Button
```

```js
 
```

</Step>

<Step>

```js showNumbers 5[16:31]
// Button.js
import React from 'react'
import MuiButton from '@mui/material/Button'

const Button = ({ text, link }) => {
  return (
    <MuiButton text={text} href={link}>
      {text}
    </MuiButton>
  )
}

export default Button
```

```js showNumbers
// Button.builder.js
import { Builder } from '@builder.io/react'
import Button from './Button'

Builder.registerComponent(Button, {
  name: 'MyButton',
  inputs: [
    {
      name: 'text',
      type: 'string',
      defaultValue: 'Click me',
    },
    {
      name: 'link',
      type: 'url',
      defaultValue: '/',
    },
  ],
})
```

</Step>

<Step>

```js showNumbers 5[16:31]
// Button.js
import React from 'react'
import MuiButton from '@mui/material/Button'

const Button = ({ text, link }) => {
  return (
    <MuiButton text={text} href={link}>
      {text}
    </MuiButton>
  )
}

export default Button
```

```js showNumbers 6,9,14,19
// Button.builder.js
import { Builder } from '@builder.io/react'
import Button from './Button'

Builder.registerComponent(Button, {
  name: 'MyButton',
  inputs: [
    {
      name: 'text',
      type: 'string',
      defaultValue: 'Click me',
    },
    {
      name: 'link',
      type: 'url',
      defaultValue: '/',
    },
  ],
})
```

</Step>

<Step>

```js
// app.js
import './Button.builder.js'
```

```js showNumbers 6,9,14,19
// Button.builder.js
import { Builder } from '@builder.io/react'
import Button from './Button'

Builder.registerComponent(Button, {
  name: 'MyButton',
  inputs: [
    {
      name: 'text',
      type: 'string',
      defaultValue: 'Click me',
    },
    {
      name: 'link',
      type: 'url',
      defaultValue: '/',
    },
  ],
})
```

</Step>

</CodeSurferColumns>

---

<ImageDeck
  width={'100%'}
  height={'100%'}
  deckImage={DECK_IMAGES.MUI_BUTTON}
  styles={{ backgroundSize: 'cover' }}
/>

<Steps>

<div>
  <RandomlyPlaced top={29} left={39} style={{ width: '20%', height: '20%' }}>
    <ImageDeck
      deckImage={DECK_IMAGES.COMPONENTS_ONLY_MODE}
      width={'100%'}
      height={'100%'}
    />
  </RandomlyPlaced>
</div>

</Steps>

---

# Migration Results

<MigrationResultsSlide />

<Notes>
  
- SEO Score is a lot higher
- Marketing team is happy because they don't have do wait for content to change, they change it themselves
- Design team is happy since they don't have to wait for any pixel pushing
- Product is happy because they can conduct their own A/B tests
- And even operations are happy because I have more time for their demand
- Finally, we're happy because we ship to production 5X faster and we offload our work to non technical teams

</Notes>

---

<BuilderSlide />

---

<CodeSurfer theme={vsDark}>

```js
<SlideSection />
```

```js showNumbers
// SlideSction.js
import React, { useState, useEffect } from 'react'
import { BuilderComponent, builder } from '@builder.io/react'

export const BuilderSlideSection = () => {
  const [builderContentJson, setBuilderContentJson] = useState(null)

  useEffect(() => {
    builder
      .get('slide', { url: window.location.pathname })
      .then(setBuilderContentJson)
  }, [])

  return <BuilderComponent model='slide' content={builderContentJson} />
}
```

```js showNumbers 6
// SlideSction.js
import React, { useState, useEffect } from 'react'
import { BuilderComponent, builder } from '@builder.io/react'

export const BuilderSlideSection = () => {
  const [builderContentJson, setBuilderContentJson] = useState(null)

  useEffect(() => {
    builder
      .get('slide', { url: window.location.pathname })
      .then(setBuilderContentJson)
  }, [])

  return <BuilderComponent model='slide' content={builderContentJson} />
}
````

```js showNumbers 8:12
// SlideSction.js
import React, { useState, useEffect } from 'react'
import { BuilderComponent, builder } from '@builder.io/react'

export const BuilderSlideSection = () => {
  const [builderContentJson, setBuilderContentJson] = useState(null)

  useEffect(() => {
    builder
      .get('slide', { url: window.location.pathname })
      .then(setBuilderContentJson)
  }, [])

  return <BuilderComponent model='slide' content={builderContentJson} />
}
```

```js showNumbers 14
// SlideSction.js
import React, { useState, useEffect } from 'react'
import { BuilderComponent, builder } from '@builder.io/react'

export const BuilderSlideSection = () => {
  const [builderContentJson, setBuilderContentJson] = useState(null)

  useEffect(() => {
    builder
      .get('slide', { url: window.location.pathname })
      .then(setBuilderContentJson)
  }, [])

  return <BuilderComponent model='slide' content={builderContentJson} />
}
```

</CodeSurfer>

---

<ImageDeck
  width={'100%'}
  height={'100%'}
  deckImage={DECK_IMAGES.KAWAII}
  styles={{ backgroundSize: 'cover' }}
/>

---

<CodeSurferColumns themes={[vsDark, myTheme]}>

<Step>

```js showNumbers
// Kawaii.js
import React from 'react'
import { Backpack, IceCream, Chocolate } from 'react-kawaii'

export const Kawaii = ({ character, mood, color }) => {
  let Character

  switch (character) {
    case 'Backpack':
      Kawaii = Backpack
      break;
    case 'Ice Cream':
      Kawaii = IceCream
      break;
    default:
    case 'Chocolate':
      Kawaii = Chocolate
      break;
  }

  return <Character mood={mood} color={color} size={750} />
}
```

```js

```

</Step>

<Step>

```js showNumbers
// Kawaii.js
import React from 'react'
import { Backpack, IceCream, Chocolate } from 'react-kawaii'

export const Kawaii = ({ character, mood, color }) => {
  let Character

  switch (character) {
    case 'Backpack':
      Kawaii = Backpack
      break;
    case 'Ice Cream':
      Kawaii = IceCream
      break;
    default:
    case 'Chocolate':
      Kawaii = Chocolate
      break;
  }

  return <Character mood={mood} color={color} size={750} />
}
```

```js showNumbers
// Kawaii.builder.js
import { Builder } from '@builder.io/react'
import { Kawaii } from './Kawaii'

Builder.registerComponent(Kawaii, {
  name: 'Kawaii',
  inputs: [
    {
      name: 'character',
      type: 'enum',
      enum: ['Chocolate', 'Backpack', 'Ice Cream'],
      defaultValue: 'Chocolate',
    },
    {
      name: 'mood',
      type: 'enum',
      enum: ['Blissful', 'Shocked', 'Love Struck'],
      defaultValue: 'Blissful',
    },
    {
      name: 'color',
      type: 'color',
      defaultValue: '#fc105c',
    },
  ],
})
```

</Step>

<Step>

```js showNumbers 5[23:50]
// Kawaii.js
import React from 'react'
import { Backpack, IceCream, Chocolate } from 'react-kawaii'

export const Kawaii = ({ character, mood, color }) => {
  let Character

  switch (character) {
    case 'Backpack':
      Kawaii = Backpack
      break;
    case 'Ice Cream':
      Kawaii = IceCream
      break;
    default:
    case 'Chocolate':
      Kawaii = Chocolate
      break;
  }

  return <Character mood={mood} color={color} size={750} />
}
```

```js showNumbers 5[27:32],6,9:11,15:17,21:23
// Kawaii.builder.js
import { Builder } from '@builder.io/react'
import { Kawaii } from './Kawaii'

Builder.registerComponent(Kawaii, {
  name: 'Kawaii',
  inputs: [
    {
      name: 'character',
      type: 'enum',
      enum: ['Chocolate', 'Backpack', 'Ice Cream'],
      defaultValue: 'Chocolate',
    },
    {
      name: 'mood',
      type: 'string',
      enum: ['Blissful', 'Shocked', 'Love Struck'],
      defaultValue: 'Blissful',
    },
    {
      name: 'color',
      type: 'color',
      defaultValue: '#fc105c',
    },
  ],
})
```

</Step>

<Step>

```js
// app.js
import './Kawaii.builder.js'
```

```js showNumbers 5[27:32],6,9:11,15:17,21:23
// Kawaii.builder.js
import { Builder } from '@builder.io/react'
import { Kawaii } from './Kawaii'

Builder.registerComponent(Kawaii, {
  name: 'Kawaii',
  inputs: [
    {
      name: 'character',
      type: 'enum',
      enum: ['Chocolate', 'Backpack', 'Ice Cream'],
      defaultValue: 'Chocolate',
    },
    {
      name: 'mood',
      type: 'enum',
      enum: ['Blissful', 'Shocked', 'Love Struck'],
      defaultValue: 'Blissful',
    },
    {
      name: 'color',
      type: 'color',
      defaultValue: '#fc105c',
    },
  ],
})
```

</Step>

</CodeSurferColumns>

---

<BuilderSlide />

---
<div
  style={{
    width: '100vh',
    height: '100vh',
    display: 'flex',
    alignItems: 'center',
    justifyContent: 'space-between',
  }}
>
  <ZoomSteps>
    <ImageDeck deckImage={DECK_IMAGES.NEXT_JS} style={{ width: '256px', height: '256px' }}/>
    <ImageDeck deckImage={DECK_IMAGES.BUILDER} style={{ width: '256px', height: '256px' }}/> 
  </ZoomSteps>
</div>

---

<SlideLayout title='Start moving from here'>
  <ClosedBottleneck initialDelay={100} interval={200} />
</SlideLayout>

---

<SlideLayout title='To here'>
  <OpenBottleneck initialDelay={1000} interval={300} />
</SlideLayout>

---

<ThankYouSlide />
